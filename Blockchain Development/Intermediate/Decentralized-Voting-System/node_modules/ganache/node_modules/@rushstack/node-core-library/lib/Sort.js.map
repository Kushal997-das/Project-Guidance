{"version":3,"file":"Sort.js","sourceRoot":"","sources":["../src/Sort.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright (c) Microsoft Corporation. All rights reserved. Licensed under the MIT license.\n// See LICENSE in the project root for license information.\n\nimport { LegacyAdapters } from './LegacyAdapters';\n\n/**\n * Operations for sorting collections.\n *\n * @remarks\n * NOTE: Prior to Node 11.x, the `Array.sort()` algorithm is not guaranteed to be stable.  For maximum\n * compatibility, consider using {@link LegacyAdapters.sortStable} instead of `Array.sort()`.\n *\n * @public\n */\nexport class Sort {\n  /**\n   * Compares `x` and `y` using the JavaScript `>` and `<` operators.  This function is suitable for usage as\n   * the callback for `array.sort()`.\n   *\n   * @remarks\n   *\n   * The JavaScript ordering is generalized so that `undefined` \\< `null` \\< all other values.\n   *\n   * @returns -1 if `x` is smaller than `y`, 1 if `x` is greater than `y`, or 0 if the values are equal.\n   *\n   * @example\n   *\n   * ```ts\n   * let array: number[] = [3, 6, 2];\n   * array.sort(Sort.compareByValue);  // [2, 3, 6]\n   * ```\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  public static compareByValue(x: any, y: any): number {\n    if (x === y) {\n      return 0;\n    }\n\n    // Undefined is smaller than anything else\n    if (x === undefined) {\n      return -1;\n    }\n    if (y === undefined) {\n      return 1;\n    }\n\n    // Null is smaller than anything except undefined\n    if (x === null) {\n      return -1;\n    }\n    if (y === null) {\n      return 1;\n    }\n\n    // These comparisons always return false if either of the arguments is \"undefined\".\n    // These comparisons return nonsense for \"null\" (true for \"null > -1\", but false for \"null < 0\" and \"null > 0\")\n    if (x < y) {\n      return -1;\n    }\n    if (x > y) {\n      return 1;\n    }\n\n    return 0;\n  }\n\n  /**\n   * Sorts the array according to a key which is obtained from the array elements.\n   * The result is guaranteed to be a stable sort.\n   *\n   * @example\n   *\n   * ```ts\n   * let array: string[] = [ 'aaa', 'bb', 'c' ];\n   * Sort.sortBy(array, x => x.length);  // [ 'c', 'bb', 'aaa' ]\n   * ```\n   */\n  public static sortBy<T>(\n    array: T[],\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    keySelector: (element: T) => any,\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    comparer: (x: any, y: any) => number = Sort.compareByValue\n  ): void {\n    LegacyAdapters.sortStable(array, (x, y) => comparer(keySelector(x), keySelector(y)));\n  }\n\n  /**\n   * Returns true if the array is already sorted.\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  public static isSorted<T>(array: T[], comparer: (x: any, y: any) => number = Sort.compareByValue): boolean {\n    let previous: T | undefined = undefined;\n    for (const element of array) {\n      if (comparer(previous, element) > 0) {\n        return false;\n      }\n      previous = element;\n    }\n    return true;\n  }\n\n  /**\n   * Returns true if the array is already sorted by the specified key.\n   *\n   * @example\n   *\n   * ```ts\n   * let array: string[] = [ 'a', 'bb', 'ccc' ];\n   * Sort.isSortedBy(array, x => x.length); // true\n   * ```\n   */\n  public static isSortedBy<T>(\n    array: T[],\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    keySelector: (element: T) => any,\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    comparer: (x: any, y: any) => number = Sort.compareByValue\n  ): boolean {\n    let previousKey: T | undefined = undefined;\n    for (const element of array) {\n      const key: T = keySelector(element);\n      if (comparer(previousKey, key) > 0) {\n        return false;\n      }\n      previousKey = key;\n    }\n    return true;\n  }\n\n  /**\n   * Sorts the entries in a Map object according to the map keys.\n   * The result is guaranteed to be a stable sort.\n   *\n   * @example\n   *\n   * ```ts\n   * let map: Map<string, number> = new Map<string, number>();\n   * map.set('zebra', 1);\n   * map.set('goose', 2);\n   * map.set('aardvark', 3);\n   * Sort.sortMapKeys(map);\n   * console.log(JSON.stringify(Array.from(map.keys()))); // [\"aardvark\",\"goose\",\"zebra\"]\n   * ```\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  public static sortMapKeys<K, V>(\n    map: Map<K, V>,\n    keyComparer: (x: K, y: K) => number = Sort.compareByValue\n  ): void {\n    const pairs: [K, V][] = Array.from(map.entries());\n\n    // Sorting a map is expensive, so first check whether it's already sorted.\n    if (Sort.isSortedBy(pairs, (x) => x[0], keyComparer)) {\n      return;\n    }\n\n    Sort.sortBy(pairs, (x) => x[0], keyComparer);\n    map.clear();\n    for (const pair of pairs) {\n      map.set(pair[0], pair[1]);\n    }\n  }\n\n  /**\n   * Sorts the entries in a Set object according to the specified keys.\n   * The result is guaranteed to be a stable sort.\n   *\n   * @example\n   *\n   * ```ts\n   * let set: Set<string> = new Set<string>();\n   * set.add('aaa');\n   * set.add('bb');\n   * set.add('c');\n   * Sort.sortSetBy(set, x => x.length);\n   * console.log(Array.from(set)); // ['c', 'bb', 'aaa']\n   * ```\n   */\n  public static sortSetBy<T>(\n    set: Set<T>,\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    keySelector: (element: T) => any,\n    keyComparer: (x: T, y: T) => number = Sort.compareByValue\n  ): void {\n    const array: T[] = Array.from(set);\n\n    // Sorting a set is expensive, so first check whether it's already sorted.\n    if (Sort.isSortedBy(array, keySelector, keyComparer)) {\n      return;\n    }\n\n    LegacyAdapters.sortStable(array, (x, y) => keyComparer(keySelector(x), keySelector(y)));\n\n    set.clear();\n    for (const item of array) {\n      set.add(item);\n    }\n  }\n\n  /**\n   * Sorts the entries in a Set object.  The result is guaranteed to be a stable sort.\n   *\n   * @example\n   *\n   * ```ts\n   * let set: Set<string> = new Set<string>();\n   * set.add('zebra');\n   * set.add('goose');\n   * set.add('aardvark');\n   * Sort.sortSet(set);\n   * console.log(Array.from(set)); // ['aardvark', 'goose', 'zebra']\n   * ```\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  public static sortSet<T>(set: Set<T>, comparer: (x: T, y: T) => number = Sort.compareByValue): void {\n    const array: T[] = Array.from(set);\n\n    // Sorting a set is expensive, so first check whether it's already sorted.\n    if (Sort.isSorted(array, comparer)) {\n      return;\n    }\n\n    LegacyAdapters.sortStable(array, (x, y) => comparer(x, y));\n\n    set.clear();\n    for (const item of array) {\n      set.add(item);\n    }\n  }\n}\n"]}