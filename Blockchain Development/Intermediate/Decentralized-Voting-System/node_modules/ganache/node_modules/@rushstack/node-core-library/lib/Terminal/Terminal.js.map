{"version":3,"file":"Terminal.js","sourceRoot":"","sources":["../../src/Terminal/Terminal.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright (c) Microsoft Corporation. All rights reserved. Licensed under the MIT license.\n// See LICENSE in the project root for license information.\n\nimport { ITerminalProvider, TerminalProviderSeverity } from './ITerminalProvider';\nimport {\n  IColorableSequence,\n  ColorValue,\n  Colors,\n  eolSequence,\n  TextAttribute,\n  ConsoleColorCodes\n} from './Colors';\nimport { ITerminal } from './ITerminal';\n\n/**\n * This class facilitates writing to a console.\n *\n * @beta\n */\nexport class Terminal implements ITerminal {\n  private _providers: Set<ITerminalProvider>;\n\n  public constructor(provider: ITerminalProvider) {\n    this._providers = new Set<ITerminalProvider>();\n    this._providers.add(provider);\n  }\n\n  /**\n   * {@inheritdoc ITerminal.registerProvider}\n   */\n  public registerProvider(provider: ITerminalProvider): void {\n    this._providers.add(provider);\n  }\n\n  /**\n   * {@inheritdoc ITerminal.unregisterProvider}\n   */\n  public unregisterProvider(provider: ITerminalProvider): void {\n    if (this._providers.has(provider)) {\n      this._providers.delete(provider);\n    }\n  }\n\n  /**\n   * {@inheritdoc ITerminal.write}\n   */\n  public write(...messageParts: (string | IColorableSequence)[]): void {\n    this._writeSegmentsToProviders(messageParts, TerminalProviderSeverity.log);\n  }\n\n  /**\n   * {@inheritdoc ITerminal.writeLine}\n   */\n  public writeLine(...messageParts: (string | IColorableSequence)[]): void {\n    this.write(...messageParts, eolSequence);\n  }\n\n  /**\n   * {@inheritdoc ITerminal.writeWarning}\n   */\n  public writeWarning(...messageParts: (string | IColorableSequence)[]): void {\n    this._writeSegmentsToProviders(\n      messageParts.map(\n        (part): IColorableSequence => ({\n          ...Colors._normalizeStringOrColorableSequence(part),\n          foregroundColor: ColorValue.Yellow\n        })\n      ),\n      TerminalProviderSeverity.warning\n    );\n  }\n\n  /**\n   * {@inheritdoc ITerminal.writeWarningLine}\n   */\n  public writeWarningLine(...messageParts: (string | IColorableSequence)[]): void {\n    this._writeSegmentsToProviders(\n      [\n        ...messageParts.map(\n          (part): IColorableSequence => ({\n            ...Colors._normalizeStringOrColorableSequence(part),\n            foregroundColor: ColorValue.Yellow\n          })\n        ),\n        eolSequence\n      ],\n      TerminalProviderSeverity.warning\n    );\n  }\n\n  /**\n   * {@inheritdoc ITerminal.writeError}\n   */\n  public writeError(...messageParts: (string | IColorableSequence)[]): void {\n    this._writeSegmentsToProviders(\n      messageParts.map(\n        (part): IColorableSequence => ({\n          ...Colors._normalizeStringOrColorableSequence(part),\n          foregroundColor: ColorValue.Red\n        })\n      ),\n      TerminalProviderSeverity.error\n    );\n  }\n\n  /**\n   * {@inheritdoc ITerminal.writeErrorLine}\n   */\n  public writeErrorLine(...messageParts: (string | IColorableSequence)[]): void {\n    this._writeSegmentsToProviders(\n      [\n        ...messageParts.map(\n          (part): IColorableSequence => ({\n            ...Colors._normalizeStringOrColorableSequence(part),\n            foregroundColor: ColorValue.Red\n          })\n        ),\n        eolSequence\n      ],\n      TerminalProviderSeverity.error\n    );\n  }\n\n  /**\n   * {@inheritdoc ITerminal.writeVerbose}\n   */\n  public writeVerbose(...messageParts: (string | IColorableSequence)[]): void {\n    this._writeSegmentsToProviders(messageParts, TerminalProviderSeverity.verbose);\n  }\n\n  /**\n   * {@inheritdoc ITerminal.writeVerboseLine}\n   */\n  public writeVerboseLine(...messageParts: (string | IColorableSequence)[]): void {\n    this.writeVerbose(...messageParts, eolSequence);\n  }\n\n  /**\n   * {@inheritdoc ITerminal.writeDebug}\n   */\n  public writeDebug(...messageParts: (string | IColorableSequence)[]): void {\n    this._writeSegmentsToProviders(messageParts, TerminalProviderSeverity.debug);\n  }\n\n  /**\n   * {@inheritdoc ITerminal.writeDebugLine}\n   */\n  public writeDebugLine(...messageParts: (string | IColorableSequence)[]): void {\n    this.writeDebug(...messageParts, eolSequence);\n  }\n\n  private _writeSegmentsToProviders(\n    segments: (string | IColorableSequence)[],\n    severity: TerminalProviderSeverity\n  ): void {\n    const withColorText: { [eolChar: string]: string } = {};\n    const withoutColorText: { [eolChar: string]: string } = {};\n    let withColorLines: string[] | undefined;\n    let withoutColorLines: string[] | undefined;\n\n    this._providers.forEach((provider) => {\n      const eol: string = provider.eolCharacter;\n      let textToWrite: string;\n      if (provider.supportsColor) {\n        if (!withColorLines) {\n          withColorLines = this._serializeFormattableTextSegments(segments, true);\n        }\n\n        if (!withColorText[eol]) {\n          withColorText[eol] = withColorLines.join(eol);\n        }\n\n        textToWrite = withColorText[eol];\n      } else {\n        if (!withoutColorLines) {\n          withoutColorLines = this._serializeFormattableTextSegments(segments, false);\n        }\n\n        if (!withoutColorText[eol]) {\n          withoutColorText[eol] = withoutColorLines.join(eol);\n        }\n\n        textToWrite = withoutColorText[eol];\n      }\n\n      provider.write(textToWrite, severity);\n    });\n  }\n\n  private _serializeFormattableTextSegments(\n    segments: (string | IColorableSequence)[],\n    withColor: boolean\n  ): string[] {\n    const lines: string[] = [];\n    let segmentsToJoin: string[] = [];\n    let lastSegmentWasEol: boolean = false;\n    for (let i: number = 0; i < segments.length; i++) {\n      const segment: IColorableSequence = Colors._normalizeStringOrColorableSequence(segments[i]);\n      lastSegmentWasEol = !!segment.isEol;\n      if (lastSegmentWasEol) {\n        lines.push(segmentsToJoin.join(''));\n        segmentsToJoin = [];\n      } else {\n        if (withColor) {\n          const startColorCodes: number[] = [];\n          const endColorCodes: number[] = [];\n          switch (segment.foregroundColor) {\n            case ColorValue.Black: {\n              startColorCodes.push(ConsoleColorCodes.BlackForeground);\n              endColorCodes.push(ConsoleColorCodes.DefaultForeground);\n              break;\n            }\n\n            case ColorValue.Red: {\n              startColorCodes.push(ConsoleColorCodes.RedForeground);\n              endColorCodes.push(ConsoleColorCodes.DefaultForeground);\n              break;\n            }\n\n            case ColorValue.Green: {\n              startColorCodes.push(ConsoleColorCodes.GreenForeground);\n              endColorCodes.push(ConsoleColorCodes.DefaultForeground);\n              break;\n            }\n\n            case ColorValue.Yellow: {\n              startColorCodes.push(ConsoleColorCodes.YellowForeground);\n              endColorCodes.push(ConsoleColorCodes.DefaultForeground);\n              break;\n            }\n\n            case ColorValue.Blue: {\n              startColorCodes.push(ConsoleColorCodes.BlueForeground);\n              endColorCodes.push(ConsoleColorCodes.DefaultForeground);\n              break;\n            }\n\n            case ColorValue.Magenta: {\n              startColorCodes.push(ConsoleColorCodes.MagentaForeground);\n              endColorCodes.push(ConsoleColorCodes.DefaultForeground);\n              break;\n            }\n\n            case ColorValue.Cyan: {\n              startColorCodes.push(ConsoleColorCodes.CyanForeground);\n              endColorCodes.push(ConsoleColorCodes.DefaultForeground);\n              break;\n            }\n\n            case ColorValue.White: {\n              startColorCodes.push(ConsoleColorCodes.WhiteForeground);\n              endColorCodes.push(ConsoleColorCodes.DefaultForeground);\n              break;\n            }\n\n            case ColorValue.Gray: {\n              startColorCodes.push(ConsoleColorCodes.GrayForeground);\n              endColorCodes.push(ConsoleColorCodes.DefaultForeground);\n              break;\n            }\n          }\n\n          switch (segment.backgroundColor) {\n            case ColorValue.Black: {\n              startColorCodes.push(ConsoleColorCodes.BlackBackground);\n              endColorCodes.push(ConsoleColorCodes.DefaultBackground);\n              break;\n            }\n\n            case ColorValue.Red: {\n              startColorCodes.push(ConsoleColorCodes.RedBackground);\n              endColorCodes.push(ConsoleColorCodes.DefaultBackground);\n              break;\n            }\n\n            case ColorValue.Green: {\n              startColorCodes.push(ConsoleColorCodes.GreenBackground);\n              endColorCodes.push(ConsoleColorCodes.DefaultBackground);\n              break;\n            }\n\n            case ColorValue.Yellow: {\n              startColorCodes.push(ConsoleColorCodes.YellowBackground);\n              endColorCodes.push(ConsoleColorCodes.DefaultBackground);\n              break;\n            }\n\n            case ColorValue.Blue: {\n              startColorCodes.push(ConsoleColorCodes.BlueBackground);\n              endColorCodes.push(ConsoleColorCodes.DefaultBackground);\n              break;\n            }\n\n            case ColorValue.Magenta: {\n              startColorCodes.push(ConsoleColorCodes.MagentaBackground);\n              endColorCodes.push(ConsoleColorCodes.DefaultBackground);\n              break;\n            }\n\n            case ColorValue.Cyan: {\n              startColorCodes.push(ConsoleColorCodes.CyanBackground);\n              endColorCodes.push(ConsoleColorCodes.DefaultBackground);\n              break;\n            }\n\n            case ColorValue.White: {\n              startColorCodes.push(ConsoleColorCodes.WhiteBackground);\n              endColorCodes.push(ConsoleColorCodes.DefaultBackground);\n              break;\n            }\n\n            case ColorValue.Gray: {\n              startColorCodes.push(ConsoleColorCodes.GrayBackground);\n              endColorCodes.push(49);\n              break;\n            }\n          }\n\n          if (segment.textAttributes) {\n            for (const textAttribute of segment.textAttributes) {\n              switch (textAttribute) {\n                case TextAttribute.Bold: {\n                  startColorCodes.push(ConsoleColorCodes.Bold);\n                  endColorCodes.push(ConsoleColorCodes.NormalColorOrIntensity);\n                  break;\n                }\n\n                case TextAttribute.Dim: {\n                  startColorCodes.push(ConsoleColorCodes.Dim);\n                  endColorCodes.push(ConsoleColorCodes.NormalColorOrIntensity);\n                  break;\n                }\n\n                case TextAttribute.Underline: {\n                  startColorCodes.push(ConsoleColorCodes.Underline);\n                  endColorCodes.push(ConsoleColorCodes.UnderlineOff);\n                  break;\n                }\n\n                case TextAttribute.Blink: {\n                  startColorCodes.push(ConsoleColorCodes.Blink);\n                  endColorCodes.push(ConsoleColorCodes.BlinkOff);\n                  break;\n                }\n\n                case TextAttribute.InvertColor: {\n                  startColorCodes.push(ConsoleColorCodes.InvertColor);\n                  endColorCodes.push(ConsoleColorCodes.InvertColorOff);\n                  break;\n                }\n\n                case TextAttribute.Hidden: {\n                  startColorCodes.push(ConsoleColorCodes.Hidden);\n                  endColorCodes.push(ConsoleColorCodes.HiddenOff);\n                  break;\n                }\n              }\n            }\n          }\n\n          for (let j: number = 0; j < startColorCodes.length; j++) {\n            const code: number = startColorCodes[j];\n            segmentsToJoin.push(...['\\u001b[', code.toString(), 'm']);\n          }\n\n          segmentsToJoin.push(segment.text);\n\n          for (let j: number = endColorCodes.length - 1; j >= 0; j--) {\n            const code: number = endColorCodes[j];\n            segmentsToJoin.push(...['\\u001b[', code.toString(), 'm']);\n          }\n        } else {\n          segmentsToJoin.push(segment.text);\n        }\n      }\n    }\n\n    if (segmentsToJoin.length > 0) {\n      lines.push(segmentsToJoin.join(''));\n    }\n\n    if (lastSegmentWasEol) {\n      lines.push('');\n    }\n\n    return lines;\n  }\n}\n"]}