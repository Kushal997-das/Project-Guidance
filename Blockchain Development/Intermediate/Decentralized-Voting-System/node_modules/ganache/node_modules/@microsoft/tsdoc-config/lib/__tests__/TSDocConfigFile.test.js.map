{"version":3,"file":"TSDocConfigFile.test.js","sourceRoot":"","sources":["../../src/__tests__/TSDocConfigFile.test.ts"],"names":[],"mappings":"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","sourcesContent":["import { TSDocConfiguration, TSDocTagDefinition, TSDocTagSyntaxKind } from '@microsoft/tsdoc';\r\nimport * as path from 'path';\r\n\r\nimport { TSDocConfigFile } from '../TSDocConfigFile';\r\n\r\nfunction getRelativePath(testPath: string): string {\r\n  return path.relative(__dirname, testPath).split('\\\\').join('/');\r\n}\r\n\r\nexpect.addSnapshotSerializer({\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  test(value: any) {\r\n    return value instanceof TSDocConfigFile;\r\n  },\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  print(value: unknown, print: (value: any) => string, indent: any, options: any, colors: any): any {\r\n    const configFile: TSDocConfigFile = value as TSDocConfigFile;\r\n    return print({\r\n      tsdocSchema: configFile.tsdocSchema,\r\n      filePath: getRelativePath(configFile.filePath),\r\n      fileNotFound: configFile.fileNotFound,\r\n      extendsPaths: configFile.extendsPaths,\r\n      extendsFiles: configFile.extendsFiles,\r\n      noStandardTags: configFile.noStandardTags,\r\n      tagDefinitions: configFile.tagDefinitions,\r\n      supportForTags: Array.from(configFile.supportForTags).map(([tagName, supported]) => ({ tagName, supported })),\r\n      messages: configFile.log.messages,\r\n    });\r\n  },\r\n});\r\n\r\nfunction testLoadingFolder(assetPath: string): TSDocConfigFile {\r\n  return TSDocConfigFile.loadForFolder(path.join(__dirname, assetPath));\r\n}\r\n\r\ntest('Load p1', () => {\r\n  expect(testLoadingFolder('assets/p1')).toMatchInlineSnapshot(`\r\n    Object {\r\n      \"extendsFiles\": Array [],\r\n      \"extendsPaths\": Array [],\r\n      \"fileNotFound\": false,\r\n      \"filePath\": \"assets/p1/tsdoc.json\",\r\n      \"messages\": Array [],\r\n      \"noStandardTags\": undefined,\r\n      \"supportForTags\": Array [],\r\n      \"tagDefinitions\": Array [],\r\n      \"tsdocSchema\": \"https://developer.microsoft.com/json-schemas/tsdoc/v0/tsdoc.schema.json\",\r\n    }\r\n  `);\r\n});\r\n\r\ntest('Load p2', () => {\r\n  expect(testLoadingFolder('assets/p2')).toMatchInlineSnapshot(`\r\n    Object {\r\n      \"extendsFiles\": Array [],\r\n      \"extendsPaths\": Array [],\r\n      \"fileNotFound\": true,\r\n      \"filePath\": \"assets/p2/tsdoc.json\",\r\n      \"messages\": Array [\r\n        ParserMessage {\r\n          \"_text\": undefined,\r\n          \"docNode\": undefined,\r\n          \"messageId\": \"tsdoc-config-file-not-found\",\r\n          \"textRange\": TextRange {\r\n            \"buffer\": \"\",\r\n            \"end\": 0,\r\n            \"pos\": 0,\r\n          },\r\n          \"tokenSequence\": undefined,\r\n          \"unformattedText\": \"File not found\",\r\n        },\r\n      ],\r\n      \"noStandardTags\": undefined,\r\n      \"supportForTags\": Array [],\r\n      \"tagDefinitions\": Array [],\r\n      \"tsdocSchema\": \"\",\r\n    }\r\n  `);\r\n});\r\n\r\ntest('Load p3', () => {\r\n  expect(testLoadingFolder('assets/p3')).toMatchInlineSnapshot(`\r\n    Object {\r\n      \"extendsFiles\": Array [\r\n        Object {\r\n          \"extendsFiles\": Array [],\r\n          \"extendsPaths\": Array [],\r\n          \"fileNotFound\": false,\r\n          \"filePath\": \"assets/p3/base1/tsdoc-base1.json\",\r\n          \"messages\": Array [],\r\n          \"noStandardTags\": undefined,\r\n          \"supportForTags\": Array [\r\n            Object {\r\n              \"supported\": true,\r\n              \"tagName\": \"@base1\",\r\n            },\r\n          ],\r\n          \"tagDefinitions\": Array [\r\n            TSDocTagDefinition {\r\n              \"allowMultiple\": false,\r\n              \"standardization\": \"None\",\r\n              \"syntaxKind\": 2,\r\n              \"tagName\": \"@base1\",\r\n              \"tagNameWithUpperCase\": \"@BASE1\",\r\n            },\r\n          ],\r\n          \"tsdocSchema\": \"https://developer.microsoft.com/json-schemas/tsdoc/v0/tsdoc.schema.json\",\r\n        },\r\n        Object {\r\n          \"extendsFiles\": Array [],\r\n          \"extendsPaths\": Array [],\r\n          \"fileNotFound\": false,\r\n          \"filePath\": \"assets/p3/base2/tsdoc-base2.json\",\r\n          \"messages\": Array [],\r\n          \"noStandardTags\": undefined,\r\n          \"supportForTags\": Array [\r\n            Object {\r\n              \"supported\": false,\r\n              \"tagName\": \"@base2\",\r\n            },\r\n          ],\r\n          \"tagDefinitions\": Array [\r\n            TSDocTagDefinition {\r\n              \"allowMultiple\": false,\r\n              \"standardization\": \"None\",\r\n              \"syntaxKind\": 2,\r\n              \"tagName\": \"@base2\",\r\n              \"tagNameWithUpperCase\": \"@BASE2\",\r\n            },\r\n          ],\r\n          \"tsdocSchema\": \"https://developer.microsoft.com/json-schemas/tsdoc/v0/tsdoc.schema.json\",\r\n        },\r\n      ],\r\n      \"extendsPaths\": Array [\r\n        \"./base1/tsdoc-base1.json\",\r\n        \"./base2/tsdoc-base2.json\",\r\n      ],\r\n      \"fileNotFound\": false,\r\n      \"filePath\": \"assets/p3/tsdoc.json\",\r\n      \"messages\": Array [],\r\n      \"noStandardTags\": undefined,\r\n      \"supportForTags\": Array [\r\n        Object {\r\n          \"supported\": true,\r\n          \"tagName\": \"@base2\",\r\n        },\r\n      ],\r\n      \"tagDefinitions\": Array [\r\n        TSDocTagDefinition {\r\n          \"allowMultiple\": false,\r\n          \"standardization\": \"None\",\r\n          \"syntaxKind\": 2,\r\n          \"tagName\": \"@root\",\r\n          \"tagNameWithUpperCase\": \"@ROOT\",\r\n        },\r\n      ],\r\n      \"tsdocSchema\": \"https://developer.microsoft.com/json-schemas/tsdoc/v0/tsdoc.schema.json\",\r\n    }\r\n  `);\r\n});\r\n\r\ntest('Load p4', () => {\r\n  expect(testLoadingFolder('assets/p4')).toMatchInlineSnapshot(`\r\n    Object {\r\n      \"extendsFiles\": Array [\r\n        Object {\r\n          \"extendsFiles\": Array [],\r\n          \"extendsPaths\": Array [],\r\n          \"fileNotFound\": false,\r\n          \"filePath\": \"assets/p4/node_modules/example-lib/dist/tsdoc-example.json\",\r\n          \"messages\": Array [],\r\n          \"noStandardTags\": undefined,\r\n          \"supportForTags\": Array [],\r\n          \"tagDefinitions\": Array [\r\n            TSDocTagDefinition {\r\n              \"allowMultiple\": false,\r\n              \"standardization\": \"None\",\r\n              \"syntaxKind\": 2,\r\n              \"tagName\": \"@example\",\r\n              \"tagNameWithUpperCase\": \"@EXAMPLE\",\r\n            },\r\n          ],\r\n          \"tsdocSchema\": \"https://developer.microsoft.com/json-schemas/tsdoc/v0/tsdoc.schema.json\",\r\n        },\r\n      ],\r\n      \"extendsPaths\": Array [\r\n        \"example-lib/dist/tsdoc-example.json\",\r\n      ],\r\n      \"fileNotFound\": false,\r\n      \"filePath\": \"assets/p4/tsdoc.json\",\r\n      \"messages\": Array [],\r\n      \"noStandardTags\": undefined,\r\n      \"supportForTags\": Array [],\r\n      \"tagDefinitions\": Array [\r\n        TSDocTagDefinition {\r\n          \"allowMultiple\": false,\r\n          \"standardization\": \"None\",\r\n          \"syntaxKind\": 2,\r\n          \"tagName\": \"@root\",\r\n          \"tagNameWithUpperCase\": \"@ROOT\",\r\n        },\r\n      ],\r\n      \"tsdocSchema\": \"https://developer.microsoft.com/json-schemas/tsdoc/v0/tsdoc.schema.json\",\r\n    }\r\n  `);\r\n});\r\n\r\ntest('Re-serialize p3', () => {\r\n  const configFile: TSDocConfigFile = TSDocConfigFile.loadForFolder(path.join(__dirname, 'assets/p3'));\r\n  expect(configFile.hasErrors).toBe(false);\r\n\r\n  // This is the data from p3/tsdoc.json, ignoring its \"extends\" field.\r\n  expect(configFile.saveToObject()).toMatchInlineSnapshot(`\r\n    Object {\r\n      \"$schema\": \"https://developer.microsoft.com/json-schemas/tsdoc/v0/tsdoc.schema.json\",\r\n      \"supportForTags\": Object {\r\n        \"@base2\": true,\r\n      },\r\n      \"tagDefinitions\": Array [\r\n        Object {\r\n          \"syntaxKind\": \"modifier\",\r\n          \"tagName\": \"@root\",\r\n        },\r\n      ],\r\n    }\r\n  `);\r\n});\r\n\r\ntest('Re-serialize p3 without defaults', () => {\r\n  const parserConfiguration: TSDocConfiguration = new TSDocConfiguration();\r\n  parserConfiguration.clear(true);\r\n\r\n  const defaultsConfigFile: TSDocConfigFile = TSDocConfigFile.loadFromParser(parserConfiguration);\r\n  expect(defaultsConfigFile.hasErrors).toBe(false);\r\n\r\n  // This is the default configuration created by the TSDocConfigFile constructor.\r\n  expect(defaultsConfigFile.saveToObject()).toMatchInlineSnapshot(`\r\n    Object {\r\n      \"$schema\": \"https://developer.microsoft.com/json-schemas/tsdoc/v0/tsdoc.schema.json\",\r\n      \"noStandardTags\": true,\r\n    }\r\n  `);\r\n\r\n  const configFile: TSDocConfigFile = TSDocConfigFile.loadForFolder(path.join(__dirname, 'assets/p3'));\r\n  expect(configFile.hasErrors).toBe(false);\r\n  configFile.noStandardTags = true;\r\n  configFile.configureParser(parserConfiguration);\r\n\r\n  const mergedConfigFile: TSDocConfigFile = TSDocConfigFile.loadFromParser(parserConfiguration);\r\n\r\n  // This is the result of merging p3/tsdoc.json, tsdoc-base1.json, tsdoc-base2.json, and\r\n  // the TSDocConfiguration defaults.\r\n  expect(mergedConfigFile.saveToObject()).toMatchInlineSnapshot(`\r\n    Object {\r\n      \"$schema\": \"https://developer.microsoft.com/json-schemas/tsdoc/v0/tsdoc.schema.json\",\r\n      \"noStandardTags\": true,\r\n      \"supportForTags\": Object {\r\n        \"@base1\": true,\r\n        \"@base2\": true,\r\n      },\r\n      \"tagDefinitions\": Array [\r\n        Object {\r\n          \"syntaxKind\": \"modifier\",\r\n          \"tagName\": \"@base1\",\r\n        },\r\n        Object {\r\n          \"syntaxKind\": \"modifier\",\r\n          \"tagName\": \"@base2\",\r\n        },\r\n        Object {\r\n          \"syntaxKind\": \"modifier\",\r\n          \"tagName\": \"@root\",\r\n        },\r\n      ],\r\n    }\r\n  `);\r\n});\r\n\r\ntest('Re-serialize p3 with defaults', () => {\r\n  const parserConfiguration: TSDocConfiguration = new TSDocConfiguration();\r\n\r\n  const defaultsConfigFile: TSDocConfigFile = TSDocConfigFile.loadFromParser(parserConfiguration);\r\n  expect(defaultsConfigFile.hasErrors).toBe(false);\r\n\r\n  // This is the default configuration created by the TSDocConfigFile constructor.\r\n  expect(defaultsConfigFile.saveToObject()).toMatchInlineSnapshot(`\r\n    Object {\r\n      \"$schema\": \"https://developer.microsoft.com/json-schemas/tsdoc/v0/tsdoc.schema.json\",\r\n      \"noStandardTags\": true,\r\n      \"tagDefinitions\": Array [\r\n        Object {\r\n          \"syntaxKind\": \"modifier\",\r\n          \"tagName\": \"@alpha\",\r\n        },\r\n        Object {\r\n          \"syntaxKind\": \"modifier\",\r\n          \"tagName\": \"@beta\",\r\n        },\r\n        Object {\r\n          \"syntaxKind\": \"block\",\r\n          \"tagName\": \"@defaultValue\",\r\n        },\r\n        Object {\r\n          \"allowMultiple\": true,\r\n          \"syntaxKind\": \"block\",\r\n          \"tagName\": \"@decorator\",\r\n        },\r\n        Object {\r\n          \"syntaxKind\": \"block\",\r\n          \"tagName\": \"@deprecated\",\r\n        },\r\n        Object {\r\n          \"syntaxKind\": \"modifier\",\r\n          \"tagName\": \"@eventProperty\",\r\n        },\r\n        Object {\r\n          \"allowMultiple\": true,\r\n          \"syntaxKind\": \"block\",\r\n          \"tagName\": \"@example\",\r\n        },\r\n        Object {\r\n          \"syntaxKind\": \"modifier\",\r\n          \"tagName\": \"@experimental\",\r\n        },\r\n        Object {\r\n          \"syntaxKind\": \"inline\",\r\n          \"tagName\": \"@inheritDoc\",\r\n        },\r\n        Object {\r\n          \"syntaxKind\": \"modifier\",\r\n          \"tagName\": \"@internal\",\r\n        },\r\n        Object {\r\n          \"syntaxKind\": \"inline\",\r\n          \"tagName\": \"@label\",\r\n        },\r\n        Object {\r\n          \"allowMultiple\": true,\r\n          \"syntaxKind\": \"inline\",\r\n          \"tagName\": \"@link\",\r\n        },\r\n        Object {\r\n          \"syntaxKind\": \"modifier\",\r\n          \"tagName\": \"@override\",\r\n        },\r\n        Object {\r\n          \"syntaxKind\": \"modifier\",\r\n          \"tagName\": \"@packageDocumentation\",\r\n        },\r\n        Object {\r\n          \"allowMultiple\": true,\r\n          \"syntaxKind\": \"block\",\r\n          \"tagName\": \"@param\",\r\n        },\r\n        Object {\r\n          \"syntaxKind\": \"block\",\r\n          \"tagName\": \"@privateRemarks\",\r\n        },\r\n        Object {\r\n          \"syntaxKind\": \"modifier\",\r\n          \"tagName\": \"@public\",\r\n        },\r\n        Object {\r\n          \"syntaxKind\": \"modifier\",\r\n          \"tagName\": \"@readonly\",\r\n        },\r\n        Object {\r\n          \"syntaxKind\": \"block\",\r\n          \"tagName\": \"@remarks\",\r\n        },\r\n        Object {\r\n          \"syntaxKind\": \"block\",\r\n          \"tagName\": \"@returns\",\r\n        },\r\n        Object {\r\n          \"syntaxKind\": \"modifier\",\r\n          \"tagName\": \"@sealed\",\r\n        },\r\n        Object {\r\n          \"syntaxKind\": \"block\",\r\n          \"tagName\": \"@see\",\r\n        },\r\n        Object {\r\n          \"allowMultiple\": true,\r\n          \"syntaxKind\": \"block\",\r\n          \"tagName\": \"@throws\",\r\n        },\r\n        Object {\r\n          \"allowMultiple\": true,\r\n          \"syntaxKind\": \"block\",\r\n          \"tagName\": \"@typeParam\",\r\n        },\r\n        Object {\r\n          \"syntaxKind\": \"modifier\",\r\n          \"tagName\": \"@virtual\",\r\n        },\r\n      ],\r\n    }\r\n  `);\r\n\r\n  const configFile: TSDocConfigFile = TSDocConfigFile.loadForFolder(path.join(__dirname, 'assets/p3'));\r\n  expect(configFile.hasErrors).toBe(false);\r\n  configFile.configureParser(parserConfiguration);\r\n\r\n  const mergedConfigFile: TSDocConfigFile = TSDocConfigFile.loadFromParser(parserConfiguration);\r\n\r\n  // This is the result of merging p3/tsdoc.json, tsdoc-base1.json, tsdoc-base2.json, and\r\n  // the TSDocConfiguration defaults.\r\n  expect(mergedConfigFile.saveToObject()).toMatchInlineSnapshot(`\r\n    Object {\r\n      \"$schema\": \"https://developer.microsoft.com/json-schemas/tsdoc/v0/tsdoc.schema.json\",\r\n      \"noStandardTags\": true,\r\n      \"supportForTags\": Object {\r\n        \"@base1\": true,\r\n        \"@base2\": true,\r\n      },\r\n      \"tagDefinitions\": Array [\r\n        Object {\r\n          \"syntaxKind\": \"modifier\",\r\n          \"tagName\": \"@alpha\",\r\n        },\r\n        Object {\r\n          \"syntaxKind\": \"modifier\",\r\n          \"tagName\": \"@beta\",\r\n        },\r\n        Object {\r\n          \"syntaxKind\": \"block\",\r\n          \"tagName\": \"@defaultValue\",\r\n        },\r\n        Object {\r\n          \"allowMultiple\": true,\r\n          \"syntaxKind\": \"block\",\r\n          \"tagName\": \"@decorator\",\r\n        },\r\n        Object {\r\n          \"syntaxKind\": \"block\",\r\n          \"tagName\": \"@deprecated\",\r\n        },\r\n        Object {\r\n          \"syntaxKind\": \"modifier\",\r\n          \"tagName\": \"@eventProperty\",\r\n        },\r\n        Object {\r\n          \"allowMultiple\": true,\r\n          \"syntaxKind\": \"block\",\r\n          \"tagName\": \"@example\",\r\n        },\r\n        Object {\r\n          \"syntaxKind\": \"modifier\",\r\n          \"tagName\": \"@experimental\",\r\n        },\r\n        Object {\r\n          \"syntaxKind\": \"inline\",\r\n          \"tagName\": \"@inheritDoc\",\r\n        },\r\n        Object {\r\n          \"syntaxKind\": \"modifier\",\r\n          \"tagName\": \"@internal\",\r\n        },\r\n        Object {\r\n          \"syntaxKind\": \"inline\",\r\n          \"tagName\": \"@label\",\r\n        },\r\n        Object {\r\n          \"allowMultiple\": true,\r\n          \"syntaxKind\": \"inline\",\r\n          \"tagName\": \"@link\",\r\n        },\r\n        Object {\r\n          \"syntaxKind\": \"modifier\",\r\n          \"tagName\": \"@override\",\r\n        },\r\n        Object {\r\n          \"syntaxKind\": \"modifier\",\r\n          \"tagName\": \"@packageDocumentation\",\r\n        },\r\n        Object {\r\n          \"allowMultiple\": true,\r\n          \"syntaxKind\": \"block\",\r\n          \"tagName\": \"@param\",\r\n        },\r\n        Object {\r\n          \"syntaxKind\": \"block\",\r\n          \"tagName\": \"@privateRemarks\",\r\n        },\r\n        Object {\r\n          \"syntaxKind\": \"modifier\",\r\n          \"tagName\": \"@public\",\r\n        },\r\n        Object {\r\n          \"syntaxKind\": \"modifier\",\r\n          \"tagName\": \"@readonly\",\r\n        },\r\n        Object {\r\n          \"syntaxKind\": \"block\",\r\n          \"tagName\": \"@remarks\",\r\n        },\r\n        Object {\r\n          \"syntaxKind\": \"block\",\r\n          \"tagName\": \"@returns\",\r\n        },\r\n        Object {\r\n          \"syntaxKind\": \"modifier\",\r\n          \"tagName\": \"@sealed\",\r\n        },\r\n        Object {\r\n          \"syntaxKind\": \"block\",\r\n          \"tagName\": \"@see\",\r\n        },\r\n        Object {\r\n          \"allowMultiple\": true,\r\n          \"syntaxKind\": \"block\",\r\n          \"tagName\": \"@throws\",\r\n        },\r\n        Object {\r\n          \"allowMultiple\": true,\r\n          \"syntaxKind\": \"block\",\r\n          \"tagName\": \"@typeParam\",\r\n        },\r\n        Object {\r\n          \"syntaxKind\": \"modifier\",\r\n          \"tagName\": \"@virtual\",\r\n        },\r\n        Object {\r\n          \"syntaxKind\": \"modifier\",\r\n          \"tagName\": \"@base1\",\r\n        },\r\n        Object {\r\n          \"syntaxKind\": \"modifier\",\r\n          \"tagName\": \"@base2\",\r\n        },\r\n        Object {\r\n          \"syntaxKind\": \"modifier\",\r\n          \"tagName\": \"@root\",\r\n        },\r\n      ],\r\n    }\r\n  `);\r\n});\r\n\r\ntest('Test noStandardTags for p5', () => {\r\n  const configFile: TSDocConfigFile = TSDocConfigFile.loadForFolder(path.join(__dirname, 'assets/p5'));\r\n  expect(configFile.hasErrors).toBe(false);\r\n\r\n  const configuration: TSDocConfiguration = new TSDocConfiguration();\r\n  configFile.configureParser(configuration);\r\n\r\n  // noStandardTags=true because tsdoc-base2.json overrides tsdoc-base1.json, and tsdoc.json is undefined\r\n  expect(configuration.tagDefinitions.length).toEqual(0);\r\n});\r\n\r\ntest('Test noStandardTags for p6', () => {\r\n  const configFile: TSDocConfigFile = TSDocConfigFile.loadForFolder(path.join(__dirname, 'assets/p6'));\r\n  expect(configFile.hasErrors).toBe(false);\r\n\r\n  const configuration: TSDocConfiguration = new TSDocConfiguration();\r\n  configFile.configureParser(configuration);\r\n\r\n  // noStandardTags=false  because tsdoc.json  overrides tsdoc-base1.json\r\n  expect(configuration.tagDefinitions.length).toBeGreaterThan(0);\r\n});\r\n\r\ntest('Test loadFromObject()', () => {\r\n  const configuration: TSDocConfiguration = new TSDocConfiguration();\r\n  configuration.clear(true);\r\n\r\n  configuration.addTagDefinitions([\r\n    new TSDocTagDefinition({ syntaxKind: TSDocTagSyntaxKind.ModifierTag, tagName: '@tag1' }),\r\n    new TSDocTagDefinition({ syntaxKind: TSDocTagSyntaxKind.BlockTag, tagName: '@tag2', allowMultiple: true }),\r\n    new TSDocTagDefinition({ syntaxKind: TSDocTagSyntaxKind.InlineTag, tagName: '@tag3', allowMultiple: true }),\r\n  ]);\r\n\r\n  configuration.setSupportForTag(configuration.tagDefinitions[0], true);\r\n\r\n  const configFile: TSDocConfigFile = TSDocConfigFile.loadFromParser(configuration);\r\n  expect(configFile.hasErrors).toBe(false);\r\n  const jsonObject: unknown = configFile.saveToObject();\r\n\r\n  const configFile2: TSDocConfigFile = TSDocConfigFile.loadFromObject(jsonObject);\r\n  expect(configFile2.hasErrors).toBe(false);\r\n  const jsonObject2: unknown = configFile2.saveToObject();\r\n\r\n  expect(jsonObject2).toMatchInlineSnapshot(`\r\n    Object {\r\n      \"$schema\": \"https://developer.microsoft.com/json-schemas/tsdoc/v0/tsdoc.schema.json\",\r\n      \"noStandardTags\": true,\r\n      \"supportForTags\": Object {\r\n        \"@tag1\": true,\r\n      },\r\n      \"tagDefinitions\": Array [\r\n        Object {\r\n          \"syntaxKind\": \"modifier\",\r\n          \"tagName\": \"@tag1\",\r\n        },\r\n        Object {\r\n          \"allowMultiple\": true,\r\n          \"syntaxKind\": \"block\",\r\n          \"tagName\": \"@tag2\",\r\n        },\r\n        Object {\r\n          \"allowMultiple\": true,\r\n          \"syntaxKind\": \"inline\",\r\n          \"tagName\": \"@tag3\",\r\n        },\r\n      ],\r\n    }\r\n  `);\r\n\r\n  expect(jsonObject2).toStrictEqual(jsonObject);\r\n});\r\n\r\ntest('Test loadFromObject() with extends', () => {\r\n  const configuration: TSDocConfiguration = new TSDocConfiguration();\r\n  configuration.clear(true);\r\n\r\n  const configFile: TSDocConfigFile = TSDocConfigFile.loadFromParser(configuration);\r\n  expect(configFile.hasErrors).toBe(false);\r\n  const jsonObject: unknown = configFile.saveToObject();\r\n\r\n  // eslint-disable-next-line\r\n  (jsonObject as any)['extends'] = ['./some-file.json'];\r\n\r\n  expect(() => {\r\n    TSDocConfigFile.loadFromObject(jsonObject);\r\n  }).toThrowError('The \"extends\" field cannot be used with TSDocConfigFile.loadFromObject()');\r\n});\r\n"]}